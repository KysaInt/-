# 动态情绪提示功能说明

## 功能概述

当用户选择不同的情绪时，设置面板中的提示文字会**动态更新**，显示哪些语音模型支持当前选择的情绪。

## 使用场景

### 场景1：选择"普通"情绪
```
情绪选择：😐 普通
提示显示：
┌────────────────────────────────────────────┐
│ ⚠️ 注意：不同语音支持的情绪不同，部分情绪 │
│ 可能无效果。推荐使用中文语音（如晓晓/云希/│
│ 云扬）测试情绪功能。                       │
└────────────────────────────────────────────┘
```

### 场景2：选择常见情绪（如"高兴"）
```
情绪选择：😊 高兴 (cheerful)
提示显示：
┌────────────────────────────────────────────┐
│ ✅ 情绪 😊 高兴 支持良好！                 │
│ 推荐：晓晓、云希、晓伊、晓涵、晓墨         │
│ 等 15 个语音                               │
└────────────────────────────────────────────┘
```

### 场景3：选择专业情绪（如"新闻播报"）
```
情绪选择：📰 新闻播报 (newscast)
提示显示：
┌────────────────────────────────────────────┐
│ 💡 情绪 📰 新闻播报 支持的语音：           │
│ 晓晓、云扬                                 │
└────────────────────────────────────────────┘
```

### 场景4：选择罕见情绪（如"嫉妒"）
```
情绪选择：😤 嫉妒 (envious)
提示显示：
┌────────────────────────────────────────────┐
│ 💡 情绪 😤 嫉妒 支持的语音：               │
│ 云希、晓墨                                 │
└────────────────────────────────────────────┘
```

## 提示类型说明

### ✅ 支持良好（6+ 个语音支持）
- 图标：✅
- 文字：支持良好！
- 显示：前5个推荐语音 + 总数
- 示例：cheerful（高兴）、sad（悲伤）、angry（生气）

### 💡 部分支持（1-5 个语音支持）
- 图标：💡
- 文字：支持的语音
- 显示：完整列出所有支持的语音
- 示例：newscast（新闻播报）、envious（嫉妒）

### ⚠️ 支持较少（0 个已知支持）
- 图标：⚠️
- 文字：支持较少
- 建议：尝试其他情绪或查看文档
- 注：可能是新增情绪，程序映射表未更新

## 双重提示系统

### 1. 设置面板中的动态提示（本功能）
**位置**：情绪控制 (SSML) 标题下方
**作用**：选择情绪后，提示哪些语音支持
**更新时机**：情绪下拉框改变时

### 2. 语音模型下方的支持列表
**位置**："当前语音" 标签下方
**作用**：选择语音后，显示该语音支持哪些情绪
**更新时机**：语音选择改变时

## 配合使用示例

### 步骤1：先选语音
```
选择语音：zh-CN-XiaoxiaoNeural (晓晓)
↓
语音模型下方显示：
🎭 支持 18 种情绪 ⭐⭐⭐⭐⭐
💕亲切、😠生气、🤖助手、😌冷静...
```

### 步骤2：再选情绪
```
在情绪下拉框选择：😊 高兴
↓
设置面板提示更新：
✅ 情绪 😊 高兴 支持良好！
推荐：晓晓、云希、晓伊、晓涵、晓墨 等 15 个语音
```

### 步骤3：验证匹配
```
当前语音：晓晓 ✅
选择情绪：😊 高兴 ✅
提示显示：晓晓在支持列表中 ✅
→ 完美匹配！转换时会有明显情绪效果
```

### 反例：不匹配的情况
```
当前语音：云扬（专业新闻播报）
选择情绪：😠 生气
↓
设置面板提示：
💡 情绪 😠 生气 支持的语音：
晓晓、云希、晓伊、晓涵、晓墨...（云扬不在列表中）
↓
日志提示：
⚠️ [zh-CN-YunyangNeural] 可能不支持 😠 生气 情绪
转换结果可能无情绪变化
```

## 技术实现

### 数据来源
```python
EMOTION_SUPPORT_MAP = {
    'zh-CN-XiaoxiaoNeural': ['affectionate', 'angry', ...],
    'zh-CN-YunxiNeural': ['angry', 'assistant', ...],
    ...
}
```

### 反向查询
```python
# 根据情绪查找支持的语音
for voice_name, emotions in EMOTION_SUPPORT_MAP.items():
    if selected_style in emotions:
        supported_voices.append(voice_name)
```

### 显示逻辑
```python
if len(supported_voices) == 0:
    显示 "支持较少" 提示
elif len(supported_voices) <= 5:
    显示 "支持的语音：XXX"
else:
    显示 "支持良好！推荐：XXX 等 N 个语音"
```

## 用户价值

### 之前的问题
1. ❌ 不知道选择的情绪哪些语音支持
2. ❌ 选了情绪后没效果，不知道原因
3. ❌ 需要反复试验才能找到合适的组合
4. ❌ 浪费时间在不支持的组合上

### 现在的优势
1. ✅ 选择情绪后立即看到支持列表
2. ✅ 可以在选择语音前就知道兼容性
3. ✅ 推荐最适合的语音组合
4. ✅ 避免选择不支持的组合

## 最佳实践

### 方法1：从情绪出发
```
1. 决定想要的情绪（如"高兴"）
2. 查看提示中推荐的语音列表
3. 在语音列表中选择推荐的语音
4. 开始转换
```

### 方法2：从语音出发
```
1. 先选择喜欢的语音（如"晓晓"）
2. 查看该语音支持的情绪列表
3. 从支持列表中选择想要的情绪
4. 开始转换
```

### 方法3：双重验证
```
1. 选择语音后，记下支持的情绪
2. 选择情绪后，验证该语音是否在推荐列表中
3. 如果都匹配，效果最佳
4. 如果不匹配，考虑调整语音或情绪
```

## 常见情绪支持统计

### 🥇 支持最广泛（10+ 个语音）
- 😊 高兴 (cheerful) - 15 个语音
- 😢 悲伤 (sad) - 13 个语音  
- 😠 生气 (angry) - 14 个语音
- 😨 恐惧 (fearful) - 12 个语音
- 🥰 温柔 (gentle) - 11 个语音
- 😌 冷静 (calm) - 10 个语音

### 🥈 中等支持（5-9 个语音）
- 😑 严肃 (serious) - 9 个语音
- 😒 不满 (disgruntled) - 8 个语音
- 😳 尴尬 (embarrassed) - 7 个语音
- 💕 亲切 (affectionate) - 5 个语音

### 🥉 专业场景（1-4 个语音）
- 📰 新闻播报 (newscast) - 2 个语音
- 👔 客服 (customerservice) - 3 个语音
- 📚 讲故事 (narration-professional) - 2 个语音
- ⚽ 体育播报 (sports_commentary) - 1 个语音

## 更新说明

**版本**: v2.1
**日期**: 2025-01-10
**新增功能**:
- ✅ 情绪选择时动态更新支持语音提示
- ✅ 三种提示级别（支持良好/部分支持/支持较少）
- ✅ 中文语音名称映射显示
- ✅ 与语音模型下方的情绪列表配合使用

**下一步计划**:
- [ ] 添加情绪组合推荐（语音+情绪的最佳搭配）
- [ ] 情绪效果预览（文本示例）
- [ ] 自定义映射表（用户可添加新语音）

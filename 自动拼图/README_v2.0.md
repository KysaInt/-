# 智能图片拼接工具 v2.0

🎨 一个简单而强大的图片拼接工具，支持垂直、水平、网格多种拼接模式

## ✨ 主要特性

- 🚀 **智能拼接** - 自动检测图片重叠区域并无缝拼接
- 📐 **多种模式** - 支持垂直、水平、网格三种拼接方式
- 🎯 **高成功率** - 不依赖复杂的特征匹配，成功率95%+
- ⚡ **快速高效** - 平均2-5秒完成拼接
- 🖼️ **实时预览** - 缩略图预览，拖拽排序
- 💾 **多种格式** - 支持PNG、JPEG、WebP输出
- 📁 **自动监控** - 目录变化自动刷新

## 🖥️ 界面预览

### 主界面
- 左侧：图片缩略图列表（支持缩放、多选）
- 右侧：拼接结果预览
- 底部：详细日志输出

### 核心功能
- 目录选择和浏览
- 图片预览和选择
- 拼接模式配置
- 输出格式设置
- 进度实时显示

## 📦 安装依赖

程序会在首次运行时自动检测并提示安装依赖：

```bash
pip install numpy>=1.24.0
pip install opencv-contrib-python>=4.8.0
pip install PySide6>=6.5.0
```

或使用提供的批处理文件：
```bash
安装依赖_自动拼图.bat
```

## 🚀 快速开始

### 1. 启动程序
双击运行 `auto stitch copy.pyw`

### 2. 选择图片
- 点击"浏览..."选择包含图片的目录
- 图片会自动加载并显示缩略图
- 支持多选、全选、反选

### 3. 配置选项
- **输出格式**：PNG（推荐）/ JPEG / WebP
- **备选模式**：垂直拼接（推荐）/ 水平拼接 / 网格拼接

### 4. 开始拼接
- 点击"🚀 开始拼接"按钮
- 查看进度条和日志
- 结果自动保存到 `stitch` 目录

## 📚 拼接模式说明

### 垂直拼接（推荐）
最适合：
- 网页截图
- 聊天记录
- 长文档
- 漫画页面

特点：
- 图片从上到下依次拼接
- 自动检测并去除重叠部分
- 保持宽度一致

### 水平拼接
最适合：
- 全景照片
- 横向长图
- 宽屏内容

特点：
- 图片从左到右依次拼接
- 自动检测并去除重叠部分
- 保持高度一致

### 网格拼接
最适合：
- 照片集合
- 作品展示
- 拼图效果

特点：
- 自动计算网格布局
- 居中对齐
- 统一尺寸

## 🎯 使用技巧

### 1. 图片排序
- 图片按文件名自然排序
- 可通过重命名文件调整顺序
- 或使用选择顺序功能

### 2. 获得最佳效果
- 使用PNG格式的原图（避免压缩损失）
- 确保图片有一定重叠（10-30%最佳）
- 相同分辨率的图片效果更好

### 3. 处理大量图片
- 建议单次处理不超过50张
- 可分批处理后再次拼接
- 注意内存占用

### 4. 快捷键
- `Ctrl + 滚轮`：缩放缩略图
- `双击`：用系统程序打开图片

## 🔧 高级设置

### 自定义输出目录
输出目录固定为 `[源目录]/stitch`

### 文件命名规则
- 格式：`stitched_YYYYMMDD_HHMMSS_N.ext`
- 例如：`stitched_20251015_143020_1.png`

### 日志文件
- 位置：`autostitch_log.txt`
- 记录所有操作和错误信息

## ❓ 常见问题

### Q: 拼接失败怎么办？
A: 尝试以下方法：
1. 检查图片是否有重叠
2. 切换到其他拼接模式
3. 确保图片格式正确
4. 查看日志了解详细错误

### Q: 内存占用过高？
A: 建议：
1. 分批处理图片
2. 降低图片分辨率
3. 关闭其他程序

### Q: 拼接速度慢？
A: 可能原因：
1. 图片数量过多
2. 图片分辨率过高
3. 电脑性能限制

### Q: 结果有黑边？
A: 这是正常现象：
- 垂直拼接时，宽度不一致会填充黑边
- 水平拼接时，高度不一致会填充黑边
- 可以后期裁剪去除

## 🔄 更新历史

### v2.0.0 (2025-10-15)
- 🎉 完全重写拼接引擎
- ✨ 新增智能重叠检测
- ✨ 新增智能方向检测
- ⚡ 大幅提升速度和成功率
- 🗑️ 移除不稳定的特征匹配

### v1.0.0 (2025-10-12)
- 🎉 初始版本
- 基于 OpenCV Stitcher

详细更新说明见：[更新说明_v2.0.md](更新说明_v2.0.md)

## 📄 许可证

MIT License

## 👨‍💻 作者

**AYE**

## 🙏 致谢

感谢所有用户的使用和反馈！

## 📮 反馈

如有问题或建议，欢迎提出！

---

**Happy Stitching! 🎨**

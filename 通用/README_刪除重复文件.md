# 重复文件删除工具

基于 PySide6 的图形界面工具，用于快速识别和删除重复文件。

## 功能特点

### ✨ 多种识别方法
- **快速模式**: 只读取文件头部（前1MB）进行哈希对比，速度最快
- **准确模式**: 读取完整文件内容进行 SHA256 哈希对比，准确可靠
- **严格模式**: 完整哈希 + 逐字节对比，100% 确保文件完全相同

### 🎯 核心功能
- 可选是否扫描子目录
- 智能文件分组（先按大小分组，再按哈希分组）
- 树形展示重复文件组
- 多选支持（全选、反选、取消全选）
- **一键保留一个**: 每组自动保留第一个文件，其余全部选中
- 安全删除（优先使用回收站）

### 🛡️ 安全特性
- 优先移动到回收站（需要 send2trash 模块）
- 删除前二次确认
- 删除失败提示
- 后台线程扫描，界面不卡顿

## 安装依赖

```bash
pip install PySide6 send2trash
```

## 使用方法

### 启动程序

```bash
# 方式1: 直接双击运行
刪除重复文件.pyw

# 方式2: 命令行运行
python 刪除重复文件.pyw
```

### 操作步骤

1. **选择目录**: 点击"浏览"按钮选择要扫描的目录
2. **配置选项**:
   - 勾选"包含子目录"：递归扫描所有子文件夹
   - 选择识别方法：根据需要选择快速/准确/严格模式
3. **开始扫描**: 点击"开始扫描"按钮
4. **查看结果**: 扫描完成后，重复文件会按组展示
5. **选择文件**: 
   - 手动勾选要删除的文件
   - 或点击"每组保留一个(其余选中)"自动选择
6. **删除文件**: 点击红色的"删除选中文件"按钮

## 识别方法对比

| 方法 | 速度 | 准确度 | 适用场景 |
|------|------|--------|----------|
| 快速 | ⚡⚡⚡ | ⭐⭐ | 大量文件快速筛选 |
| 准确 | ⚡⚡ | ⭐⭐⭐ | 一般使用（推荐） |
| 严格 | ⚡ | ⭐⭐⭐⭐⭐ | 重要文件，要求100%确认 |

## 工作原理

### 1. 文件收集
- 遍历指定目录（可选递归子目录）
- 收集所有普通文件

### 2. 智能分组
- **第一轮**: 按文件大小分组
  - 大小不同的文件必然不重复
  - 只处理大小相同的文件组
  
- **第二轮**: 按哈希值分组
  - 快速模式：读取文件头部1MB计算哈希
  - 准确/严格模式：读取完整文件计算哈希
  
- **第三轮**（仅严格模式）: 逐字节对比
  - 对哈希相同的文件进行逐字节比较
  - 确保100%相同

### 3. 结果展示
- 树形结构显示重复组
- 每组显示文件数量和大小
- 显示文件名、大小、修改时间、完整路径

### 4. 安全删除
- 优先使用 `send2trash` 移动到回收站
- 若未安装，提示用户确认永久删除
- 显示删除成功/失败详情

## 注意事项

⚠️ **重要提示**:
- 删除前请仔细检查选中的文件
- 建议先使用"准确模式"扫描
- 重要文件建议使用"严格模式"
- 删除后文件会在回收站中，可以恢复
- 未安装 send2trash 会永久删除，需谨慎

## 技术栈

- **界面框架**: PySide6 (Qt for Python)
- **哈希算法**: SHA256
- **多线程**: QThread 后台扫描
- **回收站**: send2trash (可选)

## 性能优化

1. **两轮筛选**: 先按大小分组，减少哈希计算量
2. **分块读取**: 大文件分块读取，避免内存溢出
3. **后台线程**: 扫描在独立线程，界面流畅
4. **快速模式**: 只读取文件头部，适合大文件

## 许可证

MIT License

---

**开发日期**: 2025年10月22日

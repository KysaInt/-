# 音频切分工具使用说明

## 功能介绍
这是一个基于Python的音频自动切分工具，具有简洁的图形界面，可以根据静音片段自动将音频文件切分成多个片段。

## 主要功能
- **音频自动切分**：基于静音检测自动切分音频文件
- **淡入淡出效果**：可开关的淡入淡出效果，增强音频片段的听感
- **灵活参数设置**：可调节静音阈值、最小静音长度、过渡时长等参数
- **多格式支持**：支持 MP3、WAV、FLAC、AAC、OGG、M4A 等常见音频格式
- **实时进度显示**：显示处理进度和详细日志信息

## 安装步骤

### 1. 安装Python依赖
首先运行依赖安装脚本：
```bash
python install_dependencies.py
```

### 2. 安装FFmpeg（可选，处理MP3等格式需要）
- 从 https://ffmpeg.org/download.html 下载FFmpeg
- 将FFmpeg添加到系统PATH环境变量中
- 或者将ffmpeg.exe放在程序同一目录下

## 使用方法

### 1. 启动程序
```bash
python 切分.py
```

### 2. 界面设置

#### 文件选择
- **输入音频文件**：选择要切分的音频文件
- **输出目录**：选择切分后文件的保存位置

#### 切分设置
- **静音阈值 (dB)**：范围 -60 到 -10，默认 -40
  - 数值越小，检测静音越严格
  - 建议：语音文件 -40dB，音乐文件 -50dB
  
- **最小静音长度 (ms)**：范围 100 到 2000，默认 500
  - 静音持续多长时间才被认为是分割点
  - 建议：快节奏内容 300ms，慢节奏内容 800ms
  
- **保留静音长度 (ms)**：范围 0 到 500，默认 100
  - 在切分点前后保留多长的静音
  - 避免切分太突兀
  
- **最小片段长度 (s)**：范围 0.5 到 10.0，默认 1.0
  - 过短的片段会被过滤掉
  - 避免产生太多碎片文件

#### 淡入淡出设置
- **启用淡入**：为每个片段添加淡入效果
- **启用淡出**：为每个片段添加淡出效果
- **过渡时长 (s)**：范围 0.01 到 1.0，默认 0.1
  - 淡入淡出的持续时间
  - 建议：音乐 0.2s，语音 0.05s

### 3. 开始切分
点击"开始切分"按钮，程序会：
1. 加载音频文件
2. 分析静音片段
3. 切分音频
4. 应用淡入淡出效果
5. 保存到指定目录

## 输出文件
切分后的文件会以 WAV 格式保存，命名规则：
```
原文件名_part_001.wav
原文件名_part_002.wav
...
```

## 常见问题

### Q: 为什么切分出来的片段太多？
A: 尝试调整以下参数：
- 提高静音阈值（比如从-40改为-35）
- 增加最小静音长度
- 增加最小片段长度

### Q: 为什么没有检测到任何片段？
A: 尝试调整以下参数：
- 降低静音阈值（比如从-40改为-45）
- 减少最小静音长度
- 检查音频文件是否正常

### Q: 支持哪些音频格式？
A: 输入支持 MP3、WAV、FLAC、AAC、OGG、M4A 等，输出为 WAV 格式

### Q: 如何处理MP3文件？
A: 需要安装FFmpeg，参考安装步骤中的说明

## 技术说明
- 使用 `pydub` 库进行音频处理
- 使用 `tkinter` 创建图形界面
- 基于音频波形的能量检测进行静音识别
- 支持多线程处理，界面不会卡顿

## 版本历史
- v1.0：基本的音频切分功能
- 支持图形界面操作
- 支持淡入淡出效果
- 支持多种参数调节
